{% extends "layout.html" %}
{% block title %}Home - My Blog{% endblock %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Recent Posts</h1>
    {% if user %}
      <a href="{{ url_for('new_post') }}" class="btn btn-primary">New Post</a>
    {% endif %}
  </div>

  {% for post in posts %}
    <div class="card post-card">
      <div class="card-body">
        <h5 class="card-title">{{ post.title }}</h5>
        <p class="card-text">{{ post.content[:200] }}{% if post.content|length > 200 %}...{% endif %}</p>
        <p class="text-muted">By {{ post.user.username }}</p>
        <a href="{{ url_for('view_post', post_id=post.id) }}" class="btn btn-sm btn-outline-primary">Read More</a>
        {% if user and user.user_id == post.user_id %}
          <a href="{{ url_for('edit_post', post_id=post.id) }}" class="btn btn-sm btn-warning">Edit</a>
          <a href="{{ url_for('delete_post', post_id=post.id) }}" class="btn btn-sm btn-danger">Delete</a>
        {% endif %}
      </div>
    </div>
  {% else %}
    <p>No posts yet. Be the first to write one!</p>
  {% endfor %}
{% endblock %}
